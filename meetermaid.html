<head>
    <title>MeeterMaid</title>
</head>

<body>
    {{> navigation}}
    <div class="container">
        <br/>
        <br/>
        <br/>
        <br/>{{#if currentUser}} {{> form}} {{> list}} {{/if}}
    </div>
</body>

<template name="form">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Add new Meeting</h3>
        </div>
        <div class="panel-body">
            <form>
                <div>
                    <div class="meeting-title-block">
                        <input type="text" maxlength="60" class="form-control" name="meeting-title" placeholder="Meeting Title" />
                    </div>
                    <div class="meeting-datetime-block">
                        <div class='input-group date' id='datetimepicker'>
                            <input type='text' class="form-control" id="meeting-datetime" placeholder="Time" />
                            <span class="input-group-addon">
                            <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                        </div>
                    </div>
                    <div class="meeting-description-title">
                        <label for="meeting-description" class="control-label">Meeting Notes</label>
                    </div>
                    <div class="meeting-description-block">
                        <textarea name="meeting-description" id="meeting-description" maxlength="255" placeholder="Type here" class="form-control"></textarea>
                    </div>
                    <div class="meeting-privacy-block">
                        {{#if private}}
                        <button class="btn btn-primary btn-sm" id="meeting-private-title">Private</button>
                        <input type="hidden" id="meeting-private" value="1" /> {{else}}
                        <button class="btn btn-default btn-sm" id="meeting-private-title">Public</button>
                        <input type="hidden" id="meeting-private" value="0" /> {{/if}}
                    </div>
                    <div class="meeting-priority-block">
                        <div id="meeting-priority" class="rateit"></div>
                    </div>
                    <div class="meeting-submit-block">
                        <input type="submit" value="Save" class="btn btn-primary btn-sm" />
                    </div>
                </div>
            </form>
        </div>
    </div>
    <script type="text/javascript">
        $(function () {
            $('#datetimepicker').datetimepicker();
            $('.rateit').rateit();
        });
    </script>
</template>

<template name="list">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Meeting Timeline</h3>
        </div>
        <div class="panel-body">
            <div class="list-group">
                {{#each meetings}} {{> listItem}} {{/each}}
            </div>
        </div>
    </div>
</template>

<template name="listItem">
    <div class="{{#if checked}}checked{{/if}} {{#if private}}private{{/if}}">
        <div href="#" class="list-group-item">
            <h4 class="list-group-item-heading">{{title}} by {{username}}</h4>
            <p class="list-group-item-text">{{datetime}}</p>
            <p class="list-group-item-text">{{description}}</p>
            <button class="delete">&times;</button>
            {{#if isOwner}}
            <button class="toggle-private">
                {{> privacy}}
            </button>
            {{/if}}
            <div class="rateit" data-rateit-value="{{priority}}" data-rateit-ispreset="true" data-rateit-readonly="true"></div>
            <script type="text/javascript">
                $(function () {
                    $('.rateit').rateit();
                });
            </script>
        </div>
    </div>
</template>

<template name="privacy">
    <button class="toggle-private">
        {{#if private}} Private {{else}} Public {{/if}}
    </button>
</template>