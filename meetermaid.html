<template name="layout">
    <head>
        <title>MeeterMaid</title>
    </head>
    <body>
    <div class="container">
        {{#if currentUser}}
            <header>
                {{> navigation }}
            </header>
        {{/if}}
        {{> yield}}
    </div>
    </body>
</template>

<template name="navigation">
    <h2 class="logo"><a href="/">MeeterMaid</a></h2>
    <div class="navigation">
        <ul class="nav nav-pills">
            <li role="presentation" class="{{isActivePath regex='/today'}}">
                <a href="/today">Today</a>
            </li>
            <li role="presentation" class="{{isActivePath regex='/list'}}">
                <a href="/list">Timeline</a>
            </li>
            <li role="presentation" id="logout-link"><a href="#">Logout</a></li>
        </ul>
    </div>
    <div style="clear:both"></div>
    {{currentPage}}
</template>

<template name="main">
    {{#if currentUser}}
        {{> form}}
    {{else}}
        {{> welcome}}
    {{/if}}
</template>

<template name="welcome">
    <div class="welcome-block">
        <img src="/mm_logo.png"/>
        <h1>MeeterMaid</h1>
        <p>A simple app to help you pause and reflect on your day.</p>
        {{> loginButtons}}
    </div>
</template>

<template name="form">
    <p>Time to pause and reflect on your meeting today!</p>
    <form>
        <div>
            <div class="meeting-title-block">
                <input type="text" maxlength="60" class="form-control" name="meeting-title" placeholder="Meeting Title" />
            </div>
            <div class="meeting-datetime-block">
                <div class='input-group date' id='datetimepicker'>
                    <input type='text' class="form-control" id="meeting-datetime" placeholder="Time" />
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
            </div>
            <div style="clear:both"></div>
            <div class="meeting-description-title">
                <label for="meeting-description" class="control-label">Meeting Notes</label>
            </div>
            <div class="meeting-description-block">
                <textarea name="meeting-description" id="meeting-description" maxlength="255" placeholder="Type here" class="form-control"></textarea>
            </div>
            <div class="meeting-privacy-block">
            {{#if private}}
                <div class="btn-group" role="group">
                    <button class="btn btn-primary btn-sm meeting-private-title" id="meeting-private-enable">
                        Private
                    </button>
                    <button class="btn btn-default btn-sm meeting-private-title" id="meeting-private-disable">
                        Public
                    </button>
                </div>
                <input type="hidden" id="meeting-private" value="1" />
            {{else}}
                <button class="btn btn-default btn-sm meeting-private-title" id="meeting-private-enable">
                    Private
                </button>
                <button class="btn btn-primary btn-sm meeting-private-title" id="meeting-private-disable">
                    Public
                </button>
                <input type="hidden" id="meeting-private" value="0" />
            {{/if}}
            </div>
            <div class="meeting-priority-block">
                <div id="meeting-priority" class="rateit"></div>
            </div>
            <div class="meeting-submit-block">
                <input type="submit" value="Save" class="btn btn-primary btn-sm" />
            </div>
            <div style="clear:both"></div>
        </div>
    </form>
    <script type="text/javascript">
        $(function () {
            $('#datetimepicker').datetimepicker();
            $('.rateit').rateit();
        });
    </script>
</template>

<template name="list">
    <p>Here is your meeting notes timeline</p>
    <ul>
        {{#each meetings}}
            {{> listItem}}
        {{/each}}
    </ul>
</template>

<template name="listItem">
    <li class="{{#if checked}}checked{{/if}} {{#if private}}private{{/if}}">
        <button class="delete">&times;</button>

        <input type="checkbox" checked="{{checked}}" class="toggle-checked"/>
        {{#if isOwner}}
            <button class="toggle-private">
                {{> privacy}}
            </button>
        {{/if}}

        <span class="text"><strong>{{username}}</strong></span>
        <span class="text">{{title}}</span>
        <span class="text">{{datetime}}</span>
        <div class="rateit" data-rateit-value="{{priority}}" data-rateit-ispreset="true" data-rateit-readonly="true"></div>
        {{description}}
        <script type="text/javascript">
            $(function () {
                $('.rateit').rateit();
            });
        </script>
    </li>
</template>

<template name="privacy">
    <button class="toggle-private">
        {{#if private}}
            Private
        {{else}}
            Public
        {{/if}}
    </button>
</template>